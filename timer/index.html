<html>
  <head>
    <link rel="icon" id="icon" tye="image/png">
    <title>Timer</title>
  </head>
  <body>
    <canvas id="icon-canv" width="16" height="16" style="display:none;">Sorry</canvas>
    <div class="parents" id="currentparent">
      <div class="divs" id="current">
        <p id="currentdate"></p>
        <p id="currenttime"></p>
      </div>
    </div>
    <div class="parents" id="timerparent">
      <div class="divs" id="stopwatch">
        <p id="timerdisp">00:00:00.00</p>
        <input type="button" class="stopbuttons" id="stopwatchstart" value="Start">
        <input type="button" class="stopbuttons" id="stopwatchstop" value="Stop">
      </div>
    </div>
    <style>
      .divs {
        border-radius:50px;
        background-color:#cccccc;
        position:relative;
      }
      .parents {
        position:fixed;
        width:47%;
        height:97%;
      }
      #currentparent {
        left:1%;
        top:1%;
      }
      #timerparent {
        right:1%;
        top:1%;
      }
      #currentdate {
        font-size:30px;
        text-align:center;
      }
      #currenttime {
        font-size:18px;
        text-align:center;
      }
      .stopbuttons {
        height:2%;
        border-radius:25px;
        border:none;
        background-color:#aaaaaa;
        color:#000000;
      }
      #stopwatchstart {
        position:relative;
        bottom:1%;
        left:1%;
        width:97%;
      }
      #stopwatchstop {
        position:relative;
        bottom:4%;
        left:1%;
        width:97%;
      }
    </style>
    <script>
      var currentdate = document.querySelector('#currentdate');
      var currenttime = document.querySelector('#currenttime');
      var stopwatchstart = document.querySelector('#stopwatchstart');
      var stopwatchstop = document.querySelector('#stopwatchstop');
      var timerdisp = document.querySelector('#timerdisp')
      var cen = 0;
      var sec = 0;
      var min = 0;
      var hou = 0;
      var flg = false;
      setInterval(updateDisp,10);
      function updateDisp(){
        cen = Number(cen)
        sec = Number(sec)
        min = Number(min)
        hou = Number(hou)
        if(flg){
          cen++;
          if(cen > 99){
            cen = 0;
            sec++;
            if(sec > 59){
              sec = 0;
              min++;
              if(min > 59){
                min = 0;
                hou++;
              }
            }
          }
        }
        if(hou < 10){
          hou = '0' + String(hou)
        }
        if(min < 10){
          min = '0' + String(min)
        }
        if(sec < 10){
          sec = '0' + String(sec)
        }
        if(cen < 10){
          cen = '0' + String(cen)
        }
        timerdisp.innerHTML = hou + ':' + min + ':' + sec + '.' + cen
      }
      stopwatchstop.addEventListener('click',function(){flg = false;});
      stopwatchstart.addEventListener('click',function(){flg = true;});
      function curDate(d){
        var g = d.getDate()
        if(String(g).split('')[String(g).split('').length - 1] == '1'){
          return g + 'st';
        } else if(String(g).split('')[String(g).split('').length - 1] == '2'){
          return g + 'nd';
        } else if(String(g).split('')[String(g).split('').length - 1] == '3'){
          return g + 'rd';
        } else {
          return g + 'th';
        }
      }
      function curDWeek(d){
        var h = d.getDay()
        if(h == 0){
          return 'Sunday';
        }
        if(h == 1){
          return 'Monday';
        }
        if(h == 2){
          return 'Tuesday';
        }
        if(h == 3){
          return 'Wednesday';
        }
        if(h == 4){
          return 'Thursday';
        }
        if(h == 5){
          return 'Friday';
        }
        if(h == 6){
          return 'Saturday';
        }
      }
      function curMonth(d){
        var i = d.getMonth()
        if(i == 0){
          return 'January';
        }
        if(i == 1){
          return 'February';
        }
        if(i == 2){
          return 'March';
        }
        if(i == 3){
          return 'April';
        }
        if(i == 4){
          return 'May';
        }
        if(i == 5){
          return 'June';
        }
        if(i == 6){
          return 'July';
        }
        if(i == 7){
          return 'August';
        }
        if(i == 8){
          return 'September';
        }
        if(i == 9){
          return 'October';
        }
        if(i == 10){
          return 'November';
        }
        if(i == 11){
          return 'December';
        }
      }
      function updateCur(d){
        var b = d.getFullYear();
        var c = d.getHours();
        var e = d.getMinutes();
        var f = d.getSeconds();
        if(c < 10){
        	c = '0' + String(c)
        }
        if(e < 10){
        	e = '0' + String(e)
        }
        if(f < 10){
        	f = '0' + String(f)
        }
        currentdate.innerHTML = curDWeek(d) + ', ' + curMonth(d) + ' ' + curDate(d) + ', ' + b;
        currenttime.innerHTML = c + ':' + e + ':' + f;
        var canvas = document.querySelector('#icon-canv');
        var ctx = canvas.getContext('2d');
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(0,0,16,16);
        ctx.fillStyle = '#000000';
        ctx.font = '8px Arial';
        ctx.fillText(String(c),0,8);
        ctx.fillText(String(e),0,16);
        var url = canvas.toDataURL("image/png");
        var icon = document.querySelector('link[rel~=icon]');
        if(f == '00' || f == '0' || f == 0){
        	icon.href = url;
        }
      }
      var d = new Date();
      updateCur(d);
      setInterval(function(){var d = new Date();updateCur(d);},1000);
    </script>
  </body>
</html>
