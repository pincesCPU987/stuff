<title>Results</title>
<iframe width="99%" height="99%" id="output"></iframe>
<div id="console"></div>
<button onclick="refreshFrame()" id="button">Refresh</button>
<script>
  function refreshFrame(){
    var code = window.opener.document.getElementById('txt').value;
    var output = document.getElementById('output');
    output.src = 'data:text/html;base64,' + btoa('<script>console.log = function(val) {var divId = parent.document.getElementById(\"console\");var span = parent.document.createElement(\"span\");span.innerHTML = (\'Log: <span style=\"color:black;background-color:white;border:2px solid black;\">\' + val + \'</span>\');divId.appendChild(span);};console.error = function(val){var divId = parent.document.getElementById(\"console\");var span = parent.document.createElement(\'span\');span.innerHTML = (\'Error: <span style=\"color:#330000;background-color:#ffdddd;border:2px solid #330000;\">\' + val + \'</span>\');divId.appendChild(span)}console.warn = function(val){var divId = parent.document.getElementById(\"console\");var span = parent.document.createElement(\'span\');span.innerHTML = (\'Warn: <span style=\"color:#333300;background-color:#ffffdd;border:2px solid #333300;\">\' + val + \'</span>\');divId.appendChild(span)}window.onerror = function(error){var divId = parent.document.getElementById(\'console\');var span = parent.document.createElement(\'span\');span.innerHTML = (\'Error: \' + error.name + \': \' + error.message + \' at \' + error.stack);//divId.appendChild(span);}<//script>' + code);
  }
</script>
<style>
  #button{
    position:fixed;
    top:0px;
    right:0px;
    border-top:2px solid #000;
    border-left:2px solid #f00;
    border-right:2px solid #00f;
    border-bottom:2px solid #0f0;
    background-color:white;
    color:black;
  }
  #output {
    border-top:2px solid #000;
    border-left:2px solid #f00;
    border-right:2px solid #00f;
    border-bottom:2px solid #0f0;
  }
</style>
