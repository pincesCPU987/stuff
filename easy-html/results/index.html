<title>Results</title>
<iframe width="99%" height="99%" id="output"></iframe>
<div id="console"></div>
<button onclick="refreshFrame()" id="button">Refresh</button>
<script>
  function refreshFrame(){
    var code = window.opener.document.getElementById('txt').value;
    var output = document.getElementById('output');
    output.src = 'data:text/html;base64,' + btoa('<script>' + logs.toString() + '<//script>' + code);
  }
  function logs(){
    var con = document.querySelector('#console');
    console.log = function(val){
      var p = document.createElement('span');
      p.style = 'color:black;border:2px solid black;'
      p.innerHTML = 'Log: ' + val;
      con.appendChild(p);
      con.appendChild(document.createElement('br'))
    }
    console.warn = function(val){
      var p = document.createElement('span');
      p.style = 'color:#333300;border:2px solid #333300;background-color:#ffffdd;'
      p.innerHTML = 'Warn: ' + val;
      con.appendChild(p);
      con.appendChild(document.createElement('br'))
    }
    console.error = function(val){
      var p = document.createElement('span');
      p.style = 'color:#330000;border:2px solid #330000;background-color:#ffdddd;'
      p.innerHTML = 'Error: ' + val;
      con.appendChild(p)
      con.appendChild(document.createElement('br'))
    }
    console.log('Hello');
    console.warn('Bad Idea');
    console.error('Critical Error');
  }
</script>
<style>
  #button{
    position:fixed;
    top:0px;
    right:0px;
    border-top:2px solid #000;
    border-left:2px solid #f00;
    border-right:2px solid #00f;
    border-bottom:2px solid #0f0;
    background-color:white;
    color:black;
  }
  #output {
    border-top:2px solid #000;
    border-left:2px solid #f00;
    border-right:2px solid #00f;
    border-bottom:2px solid #0f0;
  }
</style>
