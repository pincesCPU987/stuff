<title>Results</title>
<iframe width="99%" height="99%" id="output"></iframe>
<div id="console"></div>
<button onclick="refreshFrame()" id="button">Refresh</button>
<script>
  function refreshFrame(){
    var code = window.opener.document.getElementById('txt').value;
    var output = document.getElementById('output');
    output.src = 'data:text/html;base64,' + btoa(code);
    var iframeWindow = document.getElementById("output").contentWindow;
    iframeWindow.console.log = function(val) {
      var divId = document.getElementById("console");
      var span = document.createElement("span");
      span.appendChild(document.createTextNode('Log: <span style="color:black;background-color:white;border:2px solid black;">' + val + '</span>'));
      divId.appendChild(span);
    };
    iframeWindow.console.error = function(val){
      var divId = document.getElementById("console");
      var span = document.createElement('span');
      span.appendChild(document.cretaeTextNode('Error: <span style="color:#330000;background-color:#ffdddd;border:2px solid #330000;">' + val + '</span>'));
      divId.appendChild(span)
    }
    iframeWindow.console.warn = function(val){
      var divId = document.getElementById("console");
      var span = document.createElement('span');
      span.appendChild(document.cretaeTextNode('Warn: <span style="color:#333300;background-color:#ffffdd;border:2px solid #333300;">' + val + '</span>'));
      divId.appendChild(span)
    }
  }  
</script>
<style>
  #button{
    position:fixed;
    top:0px;
    right:0px;
    border-top:2px solid #000;
    border-left:2px solid #f00;
    border-right:2px solid #00f;
    border-bottom:2px solid #0f0;
    background-color:white;
    color:black;
  }
  #output {
    border-top:2px solid #000;
    border-left:2px solid #f00;
    border-right:2px solid #00f;
    border-bottom:2px solid #0f0;
  }
</style>
