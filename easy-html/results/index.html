<title>Results</title>
<iframe width="99%" height="99%" id="output"></iframe>
<div id="console"></div>
<button onclick="refreshFrame()" id="button">Refresh</button>
<script>
  function refreshFrame(){
    var code = window.opener.document.getElementById('txt').value;
    var output = document.getElementById('output');
    output.src = 'data:text/html;meta-charset,' + encodeURIComponent(`<div id="console"></div><script> ${cons} <//script> ${code}`);
  }
  var cons = `
    var console = {};
    var div = document.querySelector('#console');
    console.log = function(inp){
    	var p = document.createElement('span');
      p.innerHTML = 'Log: ' + inp;
      p.style = 'color:black;background-color:white;border:2px solid black;'
      div.appendChild(p);
      div.appendChild(document.createElement('br'));
    };
    console.warn = function(inp){
    	var p = document.createElement('span');
      p.innerHTML = 'Warn: ' + inp;
      p.style = 'color:#333300;background-color:#ffffaa;border:2px solid #333300;'
      div.appendChild(p);
      div.appendChild(document.createElement('br'));
    };
    console.error = function(inp){
    	var p = document.createElement('span');
      p.innerHTML = 'Error: ' + inp;
      p.style = 'color:#330000;background-color:#ffaaaa;border:2px solid #330000;'
      div.appendChild(p);
      div.appendChild(document.createElement('br'));
    };`
</script>
<style>
  #button{
    position:fixed;
    top:0px;
    right:0px;
    border-top:2px solid #000;
    border-left:2px solid #f00;
    border-right:2px solid #00f;
    border-bottom:2px solid #0f0;
    background-color:white;
    color:black;
  }
  #output {
    border-top:2px solid #000;
    border-left:2px solid #f00;
    border-right:2px solid #00f;
    border-bottom:2px solid #0f0;
  }
</style>
